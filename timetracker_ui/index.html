<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Ajavõtusüsteem</title>

</head>

<body>
    <h3>Spordivõistluste ajavõtusüsteem</h3>
    
    <div ng-app="myApp" ng-controller="ParticipantsController">
        <center>
            <table id="data" style="float: left">
                  <tr>
                      <th>Nimi</th>
                      <th>Stardinumber</th>
                      <th>Finišikoridor</th>
                      <th>Finiš</th>
                  </tr>
                  <tr ng-repeat="x in participants">
                      <td>{{ x.fullname }}</td>
                      <td>{{ x.startingnumber }}</td>
                      <td style="display:none;">{{ x.chipcode }}</td>
                      <td>{{ x.startingnumber }}</td>
                      <td>{{ x.startingnumber }}</td>
                  </tr>

            </table>
          </center>
    </div>

<script>

var myApp = angular.module('myApp', []);
      
myApp.controller('ParticipantsController', ['$http', '$scope', function($http,$scope) {
    $http.get('http://localhost:8000/api/v1/participants').success(function(data) {
        var participants = [];
        // make the object to an array
        for(var participant in data) {
          participants.push(data[participant]);
        }
         $scope.participants = participants;
    });
}]); 
    
</script>
</body>
</html>